{"version":3,"sources":["/table/state.js"],"names":["TableService","Service","defaultData","cols","headType","Head","bodyType","Body","toolType","Tool","checkboxType","Checkbox","titleHeight","rowHeight","toolPosition","bodyPosition","checkbox","tools","tool","head","body","data","checkPropName","isCheckAll","checks","onupdate","current","setTable","_data","map","col","push","key","width","align","value","height","find","a","undefined","title","length","Object","assign","checkRow","index","checkAll"],"mappings":"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","sourcesContent":["import { Service, action } from \"adajs\";\nimport Head from './head';\nimport Body from './body/simple';\nimport Tool from './tool';\nimport Checkbox from './checkbox';\n\nclass TableService extends Service {\n\tdefaultData() {\n\t\treturn {\n\t\t\tcols: [],\n\t\t\theadType: Head,\n\t\t\tbodyType: Body,\n\t\t\ttoolType: Tool,\n\t\t\tcheckboxType: Checkbox,\n\t\t\ttitleHeight: 40,\n\t\t\trowHeight: 30,\n\t\t\ttoolPosition: 'right',\n\t\t\tbodyPosition: 'left:0',\n\t\t\tcheckbox: true,\n\t\t\ttools: [],\n\t\t\ttool: [],\n\t\t\thead: [],\n\t\t\tbody: [],\n\t\t\tdata: [],\n\t\t\tcheckPropName: 'check',\n\t\t\tisCheckAll: false,\n\t\t\tchecks: []\n\t\t};\n\t}\n\n\tonupdate(current, data) {\n\t\tthis.setTable(current, data);\n\t}\n\n\tsetTable(current, data) {\n\t\tlet cols = data.cols || current.cols,\n\t\t\ttools = data.tools || current.tools,\n\t\t\t_data = data.data || current.data;\n\t\tcurrent.headType = data.headType || Head;\n\t\tcurrent.bodyType = data.bodyType || Body;\n\t\tcurrent.data = _data;\n\t\tcurrent.tools = tools;\n\t\tcurrent.toolPosition = data.toolPosition || 'right';\n\t\tlet checks = [];\n\t\tcurrent.body = _data.map(col => {\n\t\t\tchecks.push(col[current.checkPropName]);\n\t\t\treturn cols.map(({ key, width = 300, align = 'left' }) => {\n\t\t\t\treturn { value: col[key], width, align, height: current.rowHeight };\n\t\t\t});\n\t\t});\n\t\tcurrent.checks = checks;\n\t\tcurrent.isCheckAll = (current.checks.find(a => a !== true) !== undefined);\n\t\tcurrent.head = cols.map(({ title = '', key = '', width = 300, align = 'left' }) => {\n\t\t\treturn { title, key, width, align, height: current.titleHeight };\n\t\t});\n\t\tif (tools.length > 0) {\n\t\t\tcurrent.tool = _data.map(() => {\n\t\t\t\treturn tools.map(a => {\n\t\t\t\t\treturn Object.assign({}, a, { width: current.rowHeight, height: current.rowHeight });\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (current.toolPosition === 'right') {\n\t\t\t\tcurrent.bodyPosition = `left:${tools.length * current.rowHeight}px`;\n\t\t\t} else {\n\t\t\t\tcurrent.bodyPosition = `right:${tools.length * current.rowHeight}px;left:${current.rowHeight}px`;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrent.bodyPosition = `left:0;right:0`;\n\t\t}\n\t}\n\n\t@action('checkRow')\n\tcheckRow(current, index) {\n\t\tcurrent.checks[index] = !current.checks[index];\n\t\tcurrent.isCheckAll = !(current.checks.find(a => a !== true) !== undefined);\n\t}\n\n\t@action('checkAll')\n\tcheckAll(current) {\n\t\tcurrent.isCheckAll = !current.isCheckAll;\n\t\tif (current.isCheckAll) {\n\t\t\tcurrent.checks = current.body.map(() => true);\n\t\t} else {\n\t\t\tcurrent.checks = current.body.map(() => false);\n\t\t}\n\t}\n}\n\nexport default TableService;"]}