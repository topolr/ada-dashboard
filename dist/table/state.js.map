{"version":3,"sources":["/table/state.js"],"names":["TableService","Service","defaultData","cols","headType","Head","bodyType","Body","toolType","Tool","titleHeight","rowHeight","toolPosition","bodyPosition","tools","tool","head","body","data","onupdate","current","setTable","_data","map","title","key","width","align","height","col","value","length","a","Object","assign"],"mappings":"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","sourcesContent":["import { Service } from \"adajs\";\nimport Head from './head';\nimport Body from './body/simple';\nimport Tool from './tool';\n\nclass TableService extends Service {\n\tdefaultData() {\n\t\treturn {\n\t\t\tcols: [],\n\t\t\theadType: Head,\n\t\t\tbodyType: Body,\n\t\t\ttoolType: Tool,\n\t\t\ttitleHeight: 40,\n\t\t\trowHeight: 30,\n\t\t\ttoolPosition: 'right',\n\t\t\tbodyPosition: 'left:0',\n\t\t\ttools: [],\n\t\t\ttool: [],\n\t\t\thead: [],\n\t\t\tbody: [],\n\t\t\tdata: []\n\t\t};\n\t}\n\n\tonupdate(current, data) {\n\t\tthis.setTable(current, data);\n\t}\n\n\tsetTable(current, data) {\n\t\tlet cols = data.cols || current.cols,\n\t\t\ttools = data.tools || current.tools,\n\t\t\t_data = data.data || current.data;\n\t\tcurrent.headType = data.headType || Head;\n\t\tcurrent.bodyType = data.bodyType || Body;\n\t\tcurrent.data = _data;\n\t\tcurrent.tools = tools;\n\t\tcurrent.toolPosition = data.toolPosition || 'right';\n\t\tcurrent.head = cols.map(({ title = '', key = '', width = 300, align = 'left' }) => {\n\t\t\treturn { title, key, width, align, height: current.titleHeight };\n\t\t});\n\t\tcurrent.body = _data.map(col => {\n\t\t\treturn cols.map(({ key, width = 300, align = 'left' }) => {\n\t\t\t\treturn { value: col[key], width, align, height: current.rowHeight };\n\t\t\t});\n\t\t});\n\t\tif (tools.length > 0) {\n\t\t\tcurrent.tool = _data.map(() => {\n\t\t\t\treturn tools.map(a => {\n\t\t\t\t\treturn Object.assign({}, a, { width: current.rowHeight, height: current.rowHeight });\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (current.toolPosition === 'left') {\n\t\t\t\tcurrent.bodyPosition = `left:${tools.length * current.rowHeight}px`;\n\t\t\t} else {\n\t\t\t\tcurrent.bodyPosition = `right:${tools.length * current.rowHeight}px`;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrent.bodyPosition = `left:0;right:0`;\n\t\t}\n\t}\n}\n\nexport default TableService;"]}